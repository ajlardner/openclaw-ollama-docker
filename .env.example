# =============================================================================
# OpenClaw + Ollama Docker Template — Environment Variables
# =============================================================================
# Copy this file to .env and customize as needed.
# Lines starting with # are comments. Uncomment to override defaults.

# -----------------------------------------------------------------------------
# OpenClaw Settings
# -----------------------------------------------------------------------------

# Gateway token (auto-generated during onboard if not set)
# OPENCLAW_GATEWAY_TOKEN=

# Gateway port (host)
OPENCLAW_GATEWAY_PORT=18789

# Bridge port (host) — used for browser relay, node pairing
OPENCLAW_BRIDGE_PORT=18790

# Bind mode: "lan" (default) or "localhost" (restrict to local only)
OPENCLAW_GATEWAY_BIND=lan

# Data directories (host paths)
OPENCLAW_CONFIG_DIR=./data/openclaw-config
OPENCLAW_WORKSPACE_DIR=./data/openclaw-workspace

# OpenClaw image — use "openclaw:local" for self-built, or a registry image
OPENCLAW_IMAGE=openclaw:local

# Extra apt packages to bake into the OpenClaw image (space-separated)
# OPENCLAW_DOCKER_APT_PACKAGES=ffmpeg git curl jq

# Extra host bind mounts (comma-separated, Docker mount syntax)
# OPENCLAW_EXTRA_MOUNTS=

# Persist /home/node in a named Docker volume (optional)
# OPENCLAW_HOME_VOLUME=openclaw_home

# -----------------------------------------------------------------------------
# Ollama Settings
# -----------------------------------------------------------------------------

# Ollama host port
OLLAMA_PORT=11434

# Ollama model storage (host path)
OLLAMA_DATA_DIR=./data/ollama-models

# Models to auto-pull on first start (space-separated)
OLLAMA_MODELS=qwen3-coder

# Flash attention (improves speed, recommended)
OLLAMA_FLASH_ATTENTION=1

# Max loaded models (reduce if low on RAM)
OLLAMA_MAX_LOADED_MODELS=1

# Number of parallel requests
OLLAMA_NUM_PARALLEL=2

# Keep model in memory duration (default: 5m)
OLLAMA_KEEP_ALIVE=10m

# GPU layers to offload (-1 = all, 0 = CPU only, N = specific layers)
# Only applies with --profile gpu
OLLAMA_GPU_LAYERS=-1

# -----------------------------------------------------------------------------
# Reverse Proxy (--profile proxy)
# -----------------------------------------------------------------------------

# Domain for HTTPS (used by Caddy)
# DOMAIN=openclaw.example.com

# Email for Let's Encrypt certs
# ACME_EMAIL=you@example.com

# -----------------------------------------------------------------------------
# Channel Tokens (set after running onboard)
# -----------------------------------------------------------------------------

# DISCORD_BOT_TOKEN=

# -----------------------------------------------------------------------------
# Spawn Controller — Agent Lifecycle Limits
# -----------------------------------------------------------------------------

# Max number of dynamically spawned agents
MAX_AGENTS=10

# Resource limits per spawned agent
MAX_CPU_PER_AGENT=1.0
MAX_MEM_PER_AGENT=512
MAX_TOTAL_MEM=4096

# Rate limiting
SPAWN_COOLDOWN_SEC=30
MAX_SPAWNS_PER_HOUR=10

# Auth token for controller API (leave empty to disable auth)
# CONTROLLER_AUTH_TOKEN=your-secret-token

# Default model for spawned agents
DEFAULT_MODEL=qwen3-coder

# Message rate limiting (per agent)
MAX_MESSAGES_PER_MINUTE=10
MAX_MESSAGES_PER_HOUR=200
MAX_MESSAGE_LENGTH=2000

# Auto-cleanup: kill agents idle for this many minutes (0 = disabled)
IDLE_TIMEOUT_MIN=60

# How often to check for idle agents (seconds)
CLEANUP_INTERVAL_SEC=60

# -----------------------------------------------------------------------------
# WWE Director (--profile wwe)
# -----------------------------------------------------------------------------

# Discord bot token (only ONE needed — characters post via webhooks)
# DISCORD_BOT_TOKEN=

# Discord server and channel IDs
# DISCORD_GUILD_ID=
# DISCORD_CHANNEL_ID=

# Discord webhook URL (create in channel settings → Integrations → Webhooks)
# DISCORD_WEBHOOK_URL=

# Response timing (ms delay before responding, feels more natural)
RESPONSE_DELAY_MS=3000

# How often characters cut promos (minutes, 0 = disabled)
PROMO_INTERVAL_MIN=30

# Director API port
DIRECTOR_PORT=9091

# -----------------------------------------------------------------------------
# Network Isolation
# -----------------------------------------------------------------------------
# By default, OpenClaw and Ollama have ZERO internet access.
# All outbound traffic goes through a Squid proxy that only allows Discord.
#
# To add additional allowed domains, edit proxy/squid.conf
# To temporarily allow full internet (e.g., for onboarding):
#   docker compose run --rm --network openclaw-ollama-docker_egress openclaw-cli onboard
